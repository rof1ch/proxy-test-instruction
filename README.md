# Инструкция для тестирования API через Postman

## 1. Настройка Postman

1. Установите Postman, если он еще не установлен. Скачать можно с [официального сайта](https://www.postman.com/downloads/).
2. Откройте Postman и создайте новый запрос.

## 2. Авторизация (Auth)

### 2.1 Вход (Login)

1. Создайте новый запрос.
2. Установите метод `POST`.
3. Введите URL: `http://<ваш_сервер>/api/auth/login`.
4. Перейдите на вкладку `Body` и выберите `raw`, затем `JSON`.
5. Вставьте следующий JSON в тело запроса:

    ```json
    {
        "username": "admin",
        "password": "admin"
    }
    ```

6. Нажмите `Send`.
7. Сохраните `access_token` и `refresh_token` из ответа для дальнейших запросов.

### 2.2 Обновление токена

1. Создайте новый запрос.
2. Установите метод `POST`.
3. Введите URL: `http://<ваш_сервер>/api/auth/refresh`.
4. Перейдите на вкладку `Body` и выберите `raw`, затем `JSON`.
5. Вставьте следующий JSON в тело запроса:

    ```json
    {
        "refresh_token": "<ваш_refresh_token>"
    }
    ```

6. Нажмите `Send`.
7. Сохраните новый `access_token` из ответа.

## 3. Разрешения (Permissions)

### 3.1 Получение всех разрешений

1. Создайте новый запрос.
2. Установите метод `GET`.
3. Введите URL: `http://<ваш_сервер>/api/permissions/`.
4. Перейдите на вкладку `Headers` и добавьте заголовок:

    ```
    Authorization: erBear <ваш_access_token>
    ```

5. Нажмите `Send`.

## 4. Группы (Groups)

### 4.1 Создание группы

1. Создайте новый запрос.
2. Установите метод `POST`.
3. Введите URL: `http://<ваш_сервер>/api/groups/`.
4. Перейдите на вкладку `Headers` и добавьте заголовок:

    ```
    Authorization: Bearer <ваш_access_token>
    ```

5. Перейдите на вкладку `Body` и выберите `raw`, затем `JSON`.
6. Вставьте следующий JSON в тело запроса:

    ```json
    {
        "name": "Permission Group",
        "description": "Группа администраторов",
        "permissions": [1, 2]
    }
    ```

7. Нажмите `Send`.

### 4.2 Получение всех групп

1. Создайте новый запрос.
2. Установите метод `GET`.
3. Введите URL: `http://<ваш_сервер>/api/groups/`.
4. Перейдите на вкладку `Headers` и добавьте заголовок:

    ```
    Authorization: Bearer <ваш_access_token>
    ```

5. Нажмите `Send`.

### 4.3 Получение группы по ID

1. Создайте новый запрос.
2. Установите метод `GET`.
3. Введите URL: `http://<ваш_сервер>/api/groups/{id}` (замените `{id}` на реальный ID группы).
4. Перейдите на вкладку `Headers` и добавьте заголовок:

    ```
    Authorization: Bearer <ваш_access_token>
    ```

5. Нажмите `Send`.

### 4.4 Обновление группы

1. Создайте новый запрос.
2. Установите метод `PUT`.
3. Введите URL: `http://<ваш_сервер>/api/groups/{id}` (замените `{id}` на реальный ID группы).
4. Перейдите на вкладку `Headers` и добавьте заголовок:

    ```
    Authorization: Bearer <ваш_access_token>
    ```

5. Перейдите на вкладку `Body` и выберите `raw`, затем `JSON`.
6. Вставьте следующий JSON в тело запроса:

    ```json
    {
        "name": "Permission Group",
        "description": "Группа администратор",
        "permissions": [1]
    }
    ```

7. Нажмите `Send`.

### 4.5 Удаление группы

1. Создайте новый запрос.
2. Установите метод `DELETE`.
3. Введите URL: `http://<ваш_сервер>/api/groups/{id}` (замените `{id}` на реальный ID группы).
4. Перейдите на вкладку `Headers` и добавьте заголовок:

    ```
    Authorization: Bearer <ваш_access_token>
    ```

5. Нажмите `Send`.

## 5. Пользователи (Users)

### 5.1 Получение всех пользователей

1. Создайте новый запрос.
2. Установите метод `GET`.
3. Введите URL: `http://<ваш_сервер>/api/users/`.
4. Перейдите на вкладку `Headers` и добавьте заголовок:

    ```
    Authorization: Bearer <ваш_access_token>
    ```

5. Нажмите `Send`.

### 5.2 Создание пользователя

1. Создайте новый запрос.
2. Установите метод `POST`.
3. Введите URL: `http://<ваш_сервер>/api/users/`.
4. Перейдите на вкладку `Headers` и добавьте заголовок:

    ```
    Authorization: Bearer <ваш_access_token>
    ```

5. Перейдите на вкладку `Body` и выберите `raw`, затем `JSON`.
6. Вставьте следующий JSON в тело запроса:

    ```json
    {
        "username": "user1",
        "password": "user"
    }
    ```

7. Нажмите `Send`.

### 5.3 Получение пользователя по ID

1. Создайте новый запрос.
2. Установите метод `GET`.
3. Введите URL: `http://<ваш_сервер>/api/users/{id}` (замените `{id}` на реальный ID пользователя).
4. Перейдите на вкладку `Headers` и добавьте заголовок:

    ```
    Authorization: Bearer <ваш_access_token>
    ```

5. Нажмите `Send`.

### 5.4 Обновление пользователя

1. Создайте новый запрос.
2. Установите метод `PUT`.
3. Введите URL: `http://<ваш_сервер>/api/users/{id}` (замените `{id}` на реальный ID пользователя).
4. Перейдите на вкладку `Headers` и добавьте заголовок:

    ```
    Authorization: Bearer <ваш_access_token>
    ```

5. Перейдите на вкладку `Body` и выберите `raw`, затем `JSON`.
6. Вставьте следующий JSON в тело запроса:

    ```json
    {
        "first_name": "John",
        "last_name": "Doe",
        "username": "admin",
        "email": "john.doe@example.com",
        "is_active": false,
        "is_staff": true,
        "is_superuser": true,
        "groups": [2]
    }
    ```

7. Нажмите `Send`.

### 5.5 Удаление пользователя

1. Создайте новый запрос.
2. Установите метод `DELETE`.
3. Введите URL: `http://<ваш_сервер>/api/users/{id}` (замените `{id}` на реальный ID пользователя).
4. Перейдите на вкладку `Headers` и добавьте заголовок:

    ```
    Authorization: Bearer <ваш_access_token>
    ```

5. Нажмите `Send`.

## 6. Ошибки

### Ошибки аутентификации

- `Authorization header is required` – Отсутствует заголовок `Authorization` в запросе.
- `Invalid token format` – Токен передан в неправильном формате (например, отсутствует префикс `Bearer`).
- `Invalid or expired token` – Токен недействителен или истек срок его действия.

### Ошибки авторизации

- `User not authenticated` – Пользователь не аутентифицирован.
- `Invalid user ID` – Передан некорректный идентификатор пользователя.
- `User not found` – Пользователь не найден в системе.
- `Access denied` – Пользователь не имеет прав доступа к запрашиваемому ресурсу.

Для тестирования ошибок, отправляйте запросы с некорректными данными или без необходимых заголовков.
